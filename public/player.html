<html>
  <head>
    <link href="./playlist.css" rel="stylesheet">
    <script src="https://www.youtube.com/iframe_api"></script>
  </head>  
  <body>
  
    <div id="player">
      
    </div>
    <script> 
      
      let getId = (url) => {
        var regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
        var match = url.match(regExp);
        return (match&&match[7].length==11)? match[7] : false;
      }
      let video = document.getElementById("videoFrame");
      const urlParams = new URLSearchParams(window.location.search);      
      const start = urlParams.get('start');
      console.log("skipping to ", start);
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: window.innerHeight,
          width: window.innerWidth,
          videoId: getId(decodeURIComponent(urlParams.get('youtube'))),
          playerVars: {
            'playsinline': 1,
            'autoplay': 0,
            'controls': 0,
            'disablekb': 1,
            'modestbranding': true,
            'origin': 'https://sq-synced-videoplayer.glitch.me',
            'start': start ? Number(start) : 0
          },
          events: {
            'onReady': (event) => {
              console.log('ready');
              event.target.setVolume(10);
              event.target.seekTo(start ? Number(start) : 0)
            }
          }
        });
      }
    
    </script>
  </body>
</html>